} elsif (req.http.host == "<%= name -%>"<% if not aliases.empty? -%><% aliases.each do |name_alias| -%> ||
         req.http.host == "<%= name_alias -%>"<% end -%><% end -%>) {
    set req.backend = <%= backend -%>;
<% if not auth.empty? -%>

    if (req.http.Authorization != "Basic <%= [auth].flatten.join('" &&
            req.http.Authorization != "Basic ') -%>") {
        error 751;
    }
<% end -%>
<% if not extra.empty? -%>

<% extra.each do |extra_line| -%>
    <%= extra_line %>
<% end end -%>
<% if https_only == true -%>

    # HTTPS only vhost.
    if (req.http.X-Forwarded-Proto != "https") {
        error 750 "https://<%= name -%>/";
    }
<% end -%>

