} elsif (req.url ~ "^<%= name -%>"<% if not aliases.empty? -%><% aliases.each do |name_alias| -%> ||
         req.url ~ "^<%= name_alias -%>"<% end -%><% end -%>) {
    set req.backend = <%= backend -%>;
<% if not auth.empty? -%>

    if (req.http.Authorization != "Basic <%= [auth].flatten.join('" &&
            req.http.Authorization != "Basic ') -%>") {
        error 751;
    }
<% end -%>
<% if not extra.empty? -%>

<% extra.each do |extra_line| -%>
    <%= extra_line %>
<% end end -%>

